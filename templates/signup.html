{% extends "layout.html" %}

{% block title %}
Sign Up
{% endblock %}

{% block stylesheets %}
<meta name="viewport" content="width=device-width, initial-scale=1.0">
{% endblock %}

{% block main %}
<form action="/signup" method="POST">
    <label class="d-grid form-label mt-5 mx-auto">Sign Up</label>

    <input type="text" onchange="inputChecker()" class="mt-3 mx-auto form-control" id="email" placeholder="ACS Email">

    <input type="password" onchange="inputChecker()" class="mt-3 mx-auto form-control" id="password" placeholder="Password">

    <input type="password" onchange="inputChecker()" class="mt-3 mx-auto form-control" id="password_confirm" placeholder="Confirm Password">

    <button type="submit" disabled id="signup_submit" class="d-grid gap-2 col-6 mt-5 mx-auto btn btn-primary">Sign Up</button>
</form>

<script>
function checkEmail() {
    const emailFilter = /@acs\.sch\.ae$/;
    let email = document.getElementById("email").value;
    return emailFilter.test(email);
}

function checkPasswords() {
    let password = document.getElementById("password").value;
    let passwordConfirm = document.getElementById("password_confirm").value;
    if (!(password && passwordConfirm)) return false;
    if (password.length < 8) return false;
    if (password != passwordConfirm) return false;
    
    return true;
}

function inputChecker() {
    let cansubmit = checkEmail() && checkPasswords();
    document.getElementById('signup_submit').disabled = !cansubmit;
}
</script>

{% endblock %}